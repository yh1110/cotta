{"version":3,"sources":["../../scripts/main.ts"],"sourcesContent":["import { world, system, BlockPermutation, EntityInventoryComponent, ItemStack, DisplaySlotId } from \"@minecraft/server\";\n\nconst START_TICK = 100;\nconst ARENA_X_SIZE = 30;\nconst ARENA_Z_SIZE = 30;\nconst ARENA_X_OFFSET = 0;\nconst ARENA_Y_OFFSET = -60;\nconst ARENA_Z_OFFSET = 0;\n\n// global variables\nlet curTick = 0;\n\nfunction initializeBreakTheTerracotta() {\n  const overworld = world.getDimension(\"overworld\");\n\n  let scoreObjective = world.scoreboard.getObjective(\"score\");\n\n  if (!scoreObjective) {\n    scoreObjective = world.scoreboard.addObjective(\"score\", \"Level\");\n  }\n\n  // eliminate pesky nearby mobs\n  let entities = overworld.getEntities({\n    excludeTypes: [\"player\"],\n  });\n\n  for (let entity of entities) {\n    entity.kill();\n  }\n\n  // set up scoreboard\n  world.scoreboard.setObjectiveAtDisplaySlot(DisplaySlotId.Sidebar, {\n    objective: scoreObjective,\n  });\n\n  const players = world.getAllPlayers();\n\n  for (const player of players) {\n    scoreObjective.setScore(player, 0);\n\n    let inv = player.getComponent(\"inventory\") as EntityInventoryComponent;\n    inv.container?.addItem(new ItemStack(\"diamond_sword\"));\n    inv.container?.addItem(new ItemStack(\"dirt\", 64));\n\n    player.teleport(\n      {\n        x: ARENA_X_OFFSET - 3,\n        y: ARENA_Y_OFFSET,\n        z: ARENA_Z_OFFSET - 3,\n      },\n      {\n        dimension: overworld,\n        rotation: { x: 0, y: 0 },\n      }\n    );\n  }\n\n  world.sendMessage(\"BREAK THE TERRACOTTA\");\n}\n\nfunction gameTick() {\n  try {\n    curTick++;\n\n    if (curTick === START_TICK) {\n      initializeBreakTheTerracotta();\n    }\n  } catch (e) {\n    console.warn(\"Tick error: \" + e);\n  }\n\n  system.run(gameTick);\n}\n\nsystem.run(gameTick);\n"],"mappings":";AAAA,SAAS,OAAO,QAAoD,WAAW,qBAAqB;AAEpG,IAAM,aAAa;AAGnB,IAAM,iBAAiB;AACvB,IAAM,iBAAiB;AACvB,IAAM,iBAAiB;AAGvB,IAAI,UAAU;AAEd,SAAS,+BAA+B;AACtC,QAAM,YAAY,MAAM,aAAa,WAAW;AAEhD,MAAI,iBAAiB,MAAM,WAAW,aAAa,OAAO;AAE1D,MAAI,CAAC,gBAAgB;AACnB,qBAAiB,MAAM,WAAW,aAAa,SAAS,OAAO;AAAA,EACjE;AAGA,MAAI,WAAW,UAAU,YAAY;AAAA,IACnC,cAAc,CAAC,QAAQ;AAAA,EACzB,CAAC;AAED,WAAS,UAAU,UAAU;AAC3B,WAAO,KAAK;AAAA,EACd;AAGA,QAAM,WAAW,0BAA0B,cAAc,SAAS;AAAA,IAChE,WAAW;AAAA,EACb,CAAC;AAED,QAAM,UAAU,MAAM,cAAc;AAEpC,aAAW,UAAU,SAAS;AAC5B,mBAAe,SAAS,QAAQ,CAAC;AAEjC,QAAI,MAAM,OAAO,aAAa,WAAW;AACzC,QAAI,WAAW,QAAQ,IAAI,UAAU,eAAe,CAAC;AACrD,QAAI,WAAW,QAAQ,IAAI,UAAU,QAAQ,EAAE,CAAC;AAEhD,WAAO;AAAA,MACL;AAAA,QACE,GAAG,iBAAiB;AAAA,QACpB,GAAG;AAAA,QACH,GAAG,iBAAiB;AAAA,MACtB;AAAA,MACA;AAAA,QACE,WAAW;AAAA,QACX,UAAU,EAAE,GAAG,GAAG,GAAG,EAAE;AAAA,MACzB;AAAA,IACF;AAAA,EACF;AAEA,QAAM,YAAY,sBAAsB;AAC1C;AAEA,SAAS,WAAW;AAClB,MAAI;AACF;AAEA,QAAI,YAAY,YAAY;AAC1B,mCAA6B;AAAA,IAC/B;AAAA,EACF,SAAS,GAAG;AACV,YAAQ,KAAK,iBAAiB,CAAC;AAAA,EACjC;AAEA,SAAO,IAAI,QAAQ;AACrB;AAEA,OAAO,IAAI,QAAQ;","names":[],"file":"../scripts/main.js"}